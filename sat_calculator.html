<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-L37PYBSRKL"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-L37PYBSRKL');
        </script>
        <link rel="stylesheet" href="styles.css">
        <style>
            h1 {
                text-align: center
            }
            h4 {
                text-align: center
            }
        </style>
    </head>
    <body>
        <div id='content'>
            <h1>SAT score calculator</h1>
            <h4>Based on past SAT curves (2016-2021)</h4>
            <div class="omrs-input-group">
				<label class="omrs-input-underlined">
				  <input id="score0" name="score0" required>
				  <span class="omrs-input-label">Math Wrong answers number</span> <br><br>
            <button class="btn" style="width:60px;height:30px;" onclick="updateChart(chart0,labarr0,mathCurveDatabase, 'score0')">SET</button>
            <canvas id="chart0"></canvas>
            <br>
            <div class="container">
                <div class="item">
                    <div class="omrs-input-group">
                        <label class="omrs-input-underlined">
                        <input id="score1" name="score1" required>
                        <span class="omrs-input-label">Reading Wrong answers number</span> <br><br>
                    <button class="btn" style="width:60px;height:30px;" onclick="updateChart(chart1,labarr1,readingCurveDatabase, 'score1')">SET</button>
                    <canvas id="chart1"></canvas>
                    </div>
                </div>
                <br>
                <div class="item">
                    <div class="omrs-input-group">
                        <label class="omrs-input-underlined">
                        <input id="score2" name="score2" required>
                        <span class="omrs-input-label">Writing Wrong answers number</span> <br><br>
                    <button class="btn" style="width:60px;height:30px;" onclick="updateChart(chart2,labarr2,writingCurveDatabase, 'score2')">SET</button>
                    <canvas id="chart2"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            var mathCurveDatabase = 
            [
            [800, 790, 780, 770, 760, 740, 730, 720, 710, 700, 690, 680, 670, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 540, 530, 530, 520, 510, 510, 500, 490, 470, 460, 450, 440, 430, 420, 410, 400, 390, 380, 360, 350, 340, 330, 320, 310, 290, 280, 260, 250, 230, 210, 200, 200], 
            [800, 790, 770, 760, 750, 730, 720, 710, 710, 700, 690, 680, 670, 660, 660, 650, 640, 630, 620, 610, 600, 600, 590, 580, 570, 560, 550, 540, 540, 530, 520, 510, 510, 500, 490, 480, 470, 460, 450, 440, 430, 420, 410, 400, 390, 370, 360, 340, 330, 320, 300, 290, 270, 260, 250, 230, 210, 200, 200], 
            [800, 790, 770, 760, 740, 730, 720, 700, 690, 680, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 550, 540, 530, 530, 520, 510, 510, 500, 490, 480, 470, 460, 450, 440, 430, 430, 420, 400, 390, 380, 370, 360, 350, 330, 320, 310, 290, 280, 260, 250, 230, 210, 200, 200], 
            [800, 800, 800, 790, 790, 780, 770, 750, 740, 730, 710, 700, 690, 680, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 580, 580, 570, 560, 550, 540, 540, 530, 520, 520, 510, 500, 490, 480, 470, 460, 450, 440, 430, 420, 400, 390, 380, 360, 350, 340, 320, 300, 290, 270, 250, 240, 220, 210, 200], 
            [800, 800, 790, 780, 770, 750, 740, 730, 720, 710, 700, 690, 680, 670, 660, 650, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 540, 540, 530, 520, 520, 510, 500, 490, 480, 470, 460, 450, 440, 430, 420, 400, 390, 380, 360, 350, 340, 320, 310, 290, 280, 260, 250, 230, 220, 210, 200], 
            [800, 790, 780, 770, 750, 740, 730, 720, 710, 700, 690, 680, 670, 660, 650, 640, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 550, 540, 530, 530, 520, 510, 510, 500, 490, 480, 470, 450, 440, 430, 420, 410, 390, 380, 370, 350, 340, 330, 310, 300, 290, 270, 260, 240, 230, 210, 200, 200], 
            [800, 800, 790, 790, 780, 760, 750, 740, 720, 710, 700, 690, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 550, 540, 530, 520, 520, 510, 500, 490, 480, 470, 460, 450, 440, 420, 410, 400, 390, 380, 370, 360, 340, 330, 320, 310, 290, 280, 260, 250, 230, 220, 210, 200], 
            [800, 800, 790, 790, 780, 770, 750, 740, 720, 710, 700, 690, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 580, 570, 560, 560, 550, 540, 530, 530, 520, 510, 510, 500, 490, 480, 470, 460, 450, 440, 430, 420, 410, 400, 380, 370, 360, 350, 340, 330, 310, 300, 280, 270, 250, 230, 220, 210, 200], 
            [800, 800, 790, 790, 780, 770, 750, 740, 730, 710, 700, 690, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 540, 530, 530, 520, 510, 510, 500, 490, 480, 470, 460, 450, 440, 430, 410, 400, 390, 380, 360, 350, 340, 330, 320, 300, 290, 270, 260, 240, 230, 220, 210, 200], 
            [800, 800, 790, 770, 760, 740, 730, 710, 700, 690, 680, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 540, 530, 520, 520, 510, 500, 490, 480, 470, 460, 450, 440, 440, 430, 420, 400, 390, 380, 370, 360, 350, 340, 330, 320, 310, 290, 280, 260, 250, 230, 220, 210, 200], 
            [800, 790, 770, 750, 730, 710, 700, 690, 680, 670, 660, 650, 640, 630, 620, 610, 610, 600, 590, 580, 580, 570, 560, 550, 540, 540, 530, 520, 520, 510, 500, 500, 490, 480, 470, 460, 450, 440, 430, 420, 410, 400, 390, 380, 370, 360, 350, 340, 320, 310, 300, 280, 270, 250, 230, 220, 210, 200, 200], 
            [800, 790, 770, 760, 740, 730, 720, 700, 690, 680, 670, 670, 660, 650, 640, 630, 620, 610, 600, 600, 590, 580, 570, 570, 560, 550, 540, 540, 530, 520, 520, 510, 500, 490, 480, 470, 460, 450, 440, 430, 420, 410, 400, 380, 370, 360, 350, 340, 320, 310, 300, 290, 270, 260, 240, 230, 220, 200, 200], 
            [800, 790, 780, 770, 750, 740, 720, 710, 700, 690, 680, 670, 660, 650, 640, 630, 620, 610, 600, 590, 590, 580, 570, 560, 550, 550, 540, 530, 530, 520, 510, 510, 500, 490, 480, 470, 460, 450, 430, 420, 410, 400, 390, 370, 360, 350, 340, 330, 310, 300, 290, 280, 260, 250, 240, 220, 210, 200, 200]
            ]
            var readingCurveDatabase = 
            [
            [400, 400, 390, 380, 370, 370, 360, 350, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 370, 370, 360, 350, 350, 340, 330, 330, 320, 320, 310, 310, 300, 300, 290, 290, 290, 280, 280, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 180, 180, 170, 170, 160, 160, 150, 140, 140, 130, 120, 110, 110, 100, 100, 100, 100], 
            [400, 390, 390, 380, 370, 370, 360, 350, 350, 340, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 200, 190, 180, 180, 170, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 380, 370, 360, 350, 350, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 390, 380, 370, 370, 360, 360, 350, 350, 340, 340, 330, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 250, 250, 240, 240, 230, 220, 220, 210, 200, 200, 190, 190, 180, 170, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 400, 390, 390, 390, 380, 380, 370, 360, 350, 340, 340, 330, 320, 320, 310, 310, 300, 300, 290, 280, 280, 270, 270, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 380, 380, 370, 360, 360, 350, 350, 340, 340, 330, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 230, 230, 220, 220, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100], 
            [400, 390, 390, 380, 370, 360, 360, 350, 340, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 220, 220, 210, 210, 200, 200, 190, 190, 190, 180, 180, 170, 160, 160, 150, 140, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 390, 380, 380, 370, 360, 360, 350, 340, 340, 330, 330, 320, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 180, 180, 170, 160, 150, 150, 140, 130, 120, 110, 100, 100, 100], 
            [400, 400, 390, 390, 380, 370, 370, 360, 350, 350, 340, 340, 330, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 180, 180, 170, 170, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100], 
            [400, 390, 370, 360, 360, 350, 340, 330, 330, 320, 320, 310, 310, 310, 300, 300, 290, 290, 280, 280, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 390, 380, 370, 360, 350, 350, 340, 330, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 190, 180, 180, 180, 170, 160, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100], 
            [400, 390, 380, 370, 360, 350, 340, 340, 330, 320, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 190, 190, 180, 180, 170, 170, 160, 150, 150, 140, 130, 130, 120, 110, 100, 100, 100, 100]
            ]
            var writingCurveDatabase = 
            [
            [400, 390, 390, 380, 360, 360, 350, 340, 340, 330, 320, 310, 310, 300, 300, 290, 280, 280, 270, 270, 260, 250, 250, 240, 230, 230, 220, 210, 200, 200, 190, 180, 180, 170, 160, 160, 150, 140, 130, 120, 110, 110, 100, 100, 100], 
            [400, 400, 390, 380, 370, 360, 350, 340, 340, 330, 320, 320, 310, 300, 300, 290, 280, 280, 270, 260, 250, 250, 240, 230, 230, 220, 210, 200, 200, 190, 180, 180, 170, 160, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 370, 360, 360, 350, 340, 340, 330, 320, 320, 310, 310, 300, 290, 290, 280, 270, 260, 260, 250, 250, 240, 230, 220, 220, 210, 200, 190, 190, 180, 180, 170, 160, 150, 150, 140, 130, 120, 120, 110, 100, 100, 100, 100], 
            [400, 390, 380, 370, 360, 350, 340, 330, 330, 320, 310, 310, 300, 290, 290, 280, 270, 270, 260, 250, 250, 240, 240, 230, 220, 220, 210, 210, 200, 190, 190, 180, 170, 170, 160, 150, 140, 140, 130, 120, 110, 100, 100, 100, 100], 
            [400, 390, 380, 360, 350, 350, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 280, 270, 270, 260, 260, 250, 250, 240, 230, 230, 220, 220, 210, 200, 200, 190, 180, 180, 170, 160, 150, 140, 130, 130, 120, 110, 100, 100, 100], 
            [400, 390, 390, 380, 370, 360, 350, 340, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 280, 270, 270, 260, 250, 250, 240, 230, 220, 220, 210, 200, 190, 180, 180, 170, 160, 160, 150, 140, 130, 120, 110, 110, 100, 100, 100], 
            [400, 390, 380, 370, 360, 350, 350, 340, 330, 330, 320, 310, 310, 300, 290, 290, 280, 270, 270, 260, 260, 250, 240, 240, 230, 220, 220, 210, 210, 200, 190, 190, 180, 170, 160, 160, 150, 140, 130, 120, 120, 110, 100, 100, 100], 
            [400, 390, 370, 360, 350, 340, 340, 330, 330, 320, 310, 310, 300, 300, 290, 290, 280, 280, 270, 270, 260, 260, 250, 240, 240, 230, 230, 220, 210, 210, 200, 190, 190, 180, 170, 160, 160, 150, 140, 130, 120, 110, 100, 100, 100], 
            [400, 390, 380, 370, 360, 350, 340, 340, 330, 330, 320, 320, 310, 300, 300, 290, 280, 280, 270, 270, 260, 250, 250, 240, 230, 230, 220, 210, 210, 200, 200, 190, 180, 170, 170, 160, 160, 150, 140, 130, 120, 110, 100, 100, 100], 
            [400, 390, 390, 370, 360, 350, 350, 340, 330, 330, 320, 310, 310, 300, 290, 290, 280, 280, 270, 270, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 180, 170, 170, 160, 150, 140, 130, 120, 110, 100, 100, 100], 
            [400, 380, 360, 340, 330, 320, 310, 310, 300, 290, 290, 280, 270, 270, 260, 250, 250, 240, 240, 230, 230, 220, 210, 210, 200, 200, 190, 190, 180, 180, 180, 170, 170, 160, 160, 150, 140, 140, 130, 120, 110, 110, 100, 100, 100], 
            [400, 390, 380, 370, 350, 350, 340, 330, 320, 320, 310, 300, 290, 290, 280, 280, 270, 260, 260, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 190, 190, 180, 180, 170, 160, 160, 150, 140, 130, 120, 120, 110, 100, 100, 100], 
            [400, 380, 360, 340, 330, 320, 310, 310, 300, 290, 290, 280, 280, 270, 260, 260, 250, 240, 240, 230, 230, 220, 220, 210, 210, 200, 200, 190, 190, 180, 180, 170, 170, 160, 160, 150, 150, 140, 130, 120, 110, 110, 100, 100, 100]
            ]
            dataarr0 = new Array(70)
            dataarr0.fill(0)  
            labarr0 = [] 
            Chart.defaults.plugins.legend.display = false
            var chart0 = new Chart(document.getElementById("chart0"), {
            type: 'bar',
            data: {
                labels: [700,710,720,730,740,750,760,770,780,790,800],
                datasets: [
                { 
                    data: dataarr0,
                    fill: true,
                    backgroundColor: 'rgb(255, 99, 132)'
                }
                ]
            }
            });

            dataarr1 = new Array(70)
            dataarr1.fill(0)  
            labarr1 = [] 
            var chart1 = new Chart(document.getElementById("chart1"), {
            type: 'bar',
            data: {
                labels: [300,310,320,330,340,350,360,370,380,390,400],
                datasets: [
                { 
                    data: dataarr1,
                    fill: true,
                    backgroundColor: 'rgb(36, 191, 67)'
                }
                ]
            }
            });

            dataarr2 = new Array(70)
            dataarr2.fill(0)  
            labarr2 = [] 
            var chart2 = new Chart(document.getElementById("chart2"), {
            type: 'bar',
            data: {
                labels: [300,310,320,330,340,350,360,370,380,390,400],
                datasets: [
                { 
                    data: dataarr2,
                    fill: true,
                    backgroundColor: 'rgb(22, 11, 179)'
                }
                ]
            }
            });
            
            function updateChart(chart,labarr,database, score) { 
                window.score = score
                window.chart = chart
                window.database = database
                chart.data.datasets[0].data = new Array(70).fill(0)
                database.forEach(countPercentage)

                var indexOfMaxValue = chart.data.datasets[0].data.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);

                for (var i = 0; i <= 9; i++) {
                    labarr[i] = (indexOfMaxValue-5+i)*10+200;
                }
                chart.data.labels = labarr;
                
                chart.data.datasets[0].data = chart.data.datasets[0].data.slice(indexOfMaxValue-5,indexOfMaxValue+5)
                
                chart.update()
            };

            function countPercentage(item, index, arr) {
                var input = document.getElementById(window.score).value
                window.chart.data.datasets[0].data[(item[input]-200)/10] = chart.data.datasets[0].data[(item[input]-200)/10]+1 / window.database.length  * 100
            };
        </script>
    </body>
</html>